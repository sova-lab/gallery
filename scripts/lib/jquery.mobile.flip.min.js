(function(d,u,p){function j(a,b){this.START_OFFSET=8;this.MAX_DISTANCE=250;this.THREASHOLD_RATIO=0.5;this.element=a;this.options=b;this.currentRatio=this.flippingSide=null;this.isInAnimation=!1;this.backFilippingElement=this.flippingElement=null}function l(a,b){this.element=a;this.options=b;this.currentRatio=this.slideSide=null;this.START_OFFSET=3;this.MAX_DISTANCE=400;this.isInAnimation=!1}function h(a,b){this.element=a;this.options=d.extend({},r,b);this._defaults=r;this._name=n;this.jqmInit();this._clickContext=
{downPt:null,downTime:null,flipside:null,dList:[],tList:[]};this.options.didEndFlip=this._getCleanupFunc();this.effect="flip"===this.options.effect&&this.isFlipSupported()?new j(this.element,this.options):new l(this.element,this.options);this.init()}var n="flip",r={effect:"flip",forwardDir:"rtol",height:"",keyboardNav:!0,showPager:!1,loop:!1},s="flip-",t=[{key:"effect",attr:"effect",type:0},{key:"forwardDir",attr:"forward-dir",type:0},{key:"height",attr:"height",type:0},{key:"keyboardNav",attr:"keyboard-nav",
type:1},{key:"showPager",attr:"show-pager",type:1},{key:"loop",attr:"loop",type:1}],q="";j.prototype._initShadow=function(){var a=d(this.element).children(".flipCurrent"),b=a.width(),a=a.height(),c=d('<div class="flipShadow"></div>').hide();c.css("position","absolute").css("background-color","#111111").css("opacity","0.9").css("display","none").css("zIndex",1E4);this._isVertical()?c.css("width",b+"px").css("height",a/2+"px").css("top",a/2+"px").css("left","0"):c.css("width",b/2+"px").css("height",
a+"px").css("left",b/2+"px").css("top","0");return c};j.prototype._isVertical=function(){return"ttob"===this.options.forwardDir||"btot"===this.options.forwardDir?!0:!1};j.prototype._splitElem=function(a,b){var c=d(this.element);if(null===a||0===a.length){var g=c.width(),e=c.height();if(this.options.showPager)var f=c.children(".pager"),e=e-f.height();a=d('<div class="splitEmpty" style="width: '+g+"px; height: "+e+'px;"></div>')}var g=this._isVertical(),e=b+"First",f=b+"Second",i=c.children(e);0===
i.length?i=d('<div class="splitHalf firstHalf '+e+'"></div>').css("zIndex",1E4):i.empty();var k=c.children(f);0===k.length?k=d('<div class="splitHalf secondHalf '+f+'"></div>').css("zIndex",1E4):k.empty();i.append(a.clone());k.append(a.clone());i.find("a").each(function(a,b){d(b).bind("click",function(){return!1})});k.find("a").each(function(a,b){d(b).bind("click",function(){return!1})});var h=a.width(),m=a.height();g?(i.css("width",h+"px").css("height",Math.floor(m/2)+"px"),i.children(":first").css("height",
m+"px").css("display","block")):(i.css("width",Math.floor(h/2)+"px").css("height",m+"px"),i.children(":first").css("width",h+"px").css("display","block"));g?(k.css("width",h+"px").css("height",Math.ceil(m/2)+"px").css("top",Math.floor(m/2)+"px"),k.children(":first").css("height",m+"px").css("display","block").css("top",-1*Math.floor(m/2)+"px")):(k.css("width",Math.ceil(h/2)+"px").css("height",m+"px").css("left",Math.floor(h/2)+"px"),k.children(":first").css("width",h+"px").css("display","block").css("left",
-1*Math.floor(h/2)+"px"));0===c.children(e).length&&c.append(i);0===c.children(f).length&&c.append(k);return{first:i,second:k}};j.prototype.init=function(a){if(null===this.currentRatio){this.currentRatio=0;this.flippingSide=a;var b=d(this.element),c=b.children(".flipCurrent"),g=null,e=g=null,g="ltor"===this.options.forwardDir&&1===a||"rtol"===this.options.forwardDir&&-1===a||"ttob"===this.options.forwardDir&&1===a||"btot"===this.options.forwardDir&&-1===a?this.getNextContent(c):this.getPrevContent(c),
e=this._splitElem(g,"back"),c=this._splitElem(c,"front");-1===a?(g=c.second,e=e.first):(g=c.first,e=e.second);this.flippingElement=g;this.backFilippingElement=e;g.css("zIndex",10001);e.css("zIndex",1E4);var f=this._initShadow();this._isVertical()?(g.addClass("verticalFlipping"),e.addClass("verticalFlipping"),1===a&&f.css("top","0px")):(g.addClass("holizontalFlipping"),e.addClass("holizontalFlipping"),1===a&&f.css("left","0px"));b.append(f);g.addClass("flipping");e.addClass("backflipping");c=b.children(".flipCurrent");
c.removeClass("flipCurrent");c.addClass("working");f.show()}};j.prototype.step=function(a){if(0!==d(this.element).children(".working").length){this.currentRatio=a;var b=this.flippingElement,c=this.backFilippingElement,g=q+"Transform";b.css(g,this._calculateFlipRotateCSS(a));c.css(g,this._calculateBackFlipRotateCSS(a));d(this.element);var g=b.height(),e=0,a=Math.abs(180*a);90<a?(b.css("zIndex",1E4),c.css("zIndex",10001),"none"===c.css("display")&&(c.css("display","block"),b.css("display","none")),
this._isVertical()?-1===this.flippingSide?d(".flipShadow").css("top","0"):d(".flipShadow").css("top",g+"px"):-1===this.flippingSide?d(".flipShadow").css("left","0"):d(".flipShadow").css("left","50%"),e=Math.max(0,1-(-1.2*((180-a)/90-1)*((180-a)/90-1)+1.2))):(b.css("zIndex",10001),c.css("zIndex",1E4),"none"===b.css("display")&&(c.css("display","none"),b.css("display","block")),this._isVertical()?-1===this.flippingSide?d(".flipShadow").css("top",g+"px"):d(".flipShadow").css("top","0"):-1===this.flippingSide?
d(".flipShadow").css("left","50%"):d(".flipShadow").css("left","0"),e=Math.max(0,1-(-1.2*(a/90-1)*(a/90-1)+1.2)));d(".flipShadow").css("opacity",0.9*e)}};j.prototype._calculateFlipRotateCSS=function(a){return this._isVertical()?"rotateX("+-180*a+"deg)":"rotateY("+180*a+"deg)"};j.prototype._calculateBackFlipRotateCSS=function(a){return this._isVertical()?1===this.flippingSide?"rotateX("+-1*(180+180*a)+"deg)":"rotateX("+(180-180*a)+"deg)":1===this.flippingSide?"rotateY("+(180+180*a)+"deg)":"rotateY("+
-1*(180-180*a)+"deg)"};j.prototype.actionBK=function(a){var b=this.currentRatio,c=this.backFilippingElement;this.flippingElement.addClass("flipAction");c.addClass("flipBackAction");this._calculateFlipRotateCSS(b);this._calculateFlipRotateCSS(a)};j.prototype.action=function(a){var b=this.currentRatio,c=this,d=0,e=Math.abs(this.currentRatio),f=Math.abs(a-this.currentRatio),i=1;0>this.currentRatio?i=-1:0===this.currentRatio&&0>a&&(i=-1);var h=function(a){a=Math.abs(a)/f;a-=1;return f*(a*a*a+1)+e};0===
a&&(e=0);var j=function(){d=Math.min(1,d+0.05);var e=Math.min(1,h(d));0===a&&(e=Math.abs(b)-e);0>i&&(e*=-1);c.step(e);d+0.05<f?setTimeout(j,20):(c.currentRatio=a,c.cleanup())};this.isInAnimation=!0;j()};j.prototype.cleanup=function(){var a=d(this.element).children(".working");d(".flipShadow").replaceWith("");d(".firstHalf").replaceWith("");d(".secondHalf").replaceWith("");var b=a;"ltor"===this.options.forwardDir&&1===this.flippingSide||"rtol"===this.options.forwardDir&&-1===this.flippingSide||"ttob"===
this.options.forwardDir&&1===this.flippingSide||"btot"===this.options.forwardDir&&-1===this.flippingSide?1===Math.abs(this.currentRatio)&&(b=this.getNextContent(a)):1===Math.abs(this.currentRatio)&&(b=this.getPrevContent(a));b.addClass("flipCurrent");a.removeClass("working");"function"===typeof this.options.didEndFlip&&this.options.didEndFlip();this.flippingSide=this.currentRatio=null;this.isInAnimation=!1};j.prototype.getNextContent=function(a){a=a.next(".flipContent");0===a.length&&this.options.loop&&
(a=d(this.element).children(".flipContent").first());return 0===a.length?d():a};j.prototype.getPrevContent=function(a){a=a.prev(".flipContent");0===a.length&&this.options.loop&&(a=d(this.element).children(".flipContent").last());return 0===a.length?d():a};j.prototype.shouldTransitionContinue=function(a,b){var c=1,d=1,e=0,f=0;2<=b.tList.length?(c=b.tList[b.tList.length-1],d=b.tList[b.tList.length-2],e=b.dList[b.dList.length-1],f=b.dList[b.dList.length-2]):1===b.tList.length&&(c=b.tList[b.tList.length-
1],e=b.dList[b.dList.length-1]);var i=((new Date).getTime()-b.lastInfo.time)/100,a=a+(1>i?1:1/(10*i*i))*(e/c+f/d),a=1===this.flippingSide?Math.max(0,Math.min(1,a)):Math.max(-1,Math.min(0,a));return Math.abs(a)>this.THREASHOLD_RATIO};l.prototype.init=function(a){if(null===this.currentRatio){this.MAX_DISTANCE="rtol"===this.options.forwardDir||"ltor"===this.options.forwardDir?d(this.element).width():d(this.element).height();this.THREASHOLD_RATIO=Math.min(0.15,100/this.MAX_DISTANCE);this.currentRatio=
0;this.slideSide=a;var b=d(this.element),c=b.children(".flipCurrent"),g=null,e=!1;"ltor"===this.options.forwardDir&&1===a||"rtol"===this.options.forwardDir&&-1===a||"ttob"===this.options.forwardDir&&1===a||"btot"===this.options.forwardDir&&-1===a?(g=this.getNextContent(c),e=!0):g=this.getPrevContent(c);null===g&&(g=d());a=d(".slidingBg");0===a.length?a=d('<div class="slidingBg"></div>'):a.empty();a.hide();e?b.append(a.append(g.clone())):b.append(a.append(c.clone()));a.css("width",c.width()+"px");
a.css("height",c.height()+"px");a.children(":first").css("display","block");var f=d(".sliding");0===f.length?f=d('<div class="sliding"></div>'):f.empty();e?b.append(f.append(c.clone())):b.append(f.append(g.clone()));f.css("width",c.width()+"px").css("height",c.height()+"px").css("zIndex",1E4);if(!e)switch(this.options.forwardDir){case "rtol":f.css("left",-1*this.MAX_DISTANCE+"px");break;case "ltor":f.css("left",this.MAX_DISTANCE+"px");break;case "ttob":f.css("top",this.MAX_DISTANCE+"px");break;case "btot":f.css("top",
-1*this.MAX_DISTANCE+"px")}f.children(":first").css("display","block");c=b.children(".flipCurrent");c.removeClass("flipCurrent");c.addClass("working");a.show()}};l.prototype.step=function(a){this.currentRatio=a;var a=this.MAX_DISTANCE*a,b=d(this.element),c=b.children(".sliding");b.height();switch(this.options.forwardDir){case "ltor":1===this.slideSide?c.css("left",a+"px"):c.css("left",this.MAX_DISTANCE+a+"px");break;case "rtol":1===this.slideSide?c.css("left",-1*this.MAX_DISTANCE+a+"px"):c.css("left",
a+"px");break;case "ttob":1===this.slideSide?c.css("top",a+"px"):c.css("top",this.MAX_DISTANCE+a+"px");break;case "btot":1===this.slideSide?c.css("top",-1*this.MAX_DISTANCE+a+"px"):c.css("top",a+"px")}};l.prototype.action=function(a){var b=this,c=function(){var d=0>a-b.currentRatio?-1:1,e=b.currentRatio,e=0>d?Math.max(a,b.currentRatio+0.09*d):Math.min(a,b.currentRatio+0.09*d);b.step(e);e!==a?setTimeout(c,20):b.cleanup()};this.isInAnimation=!0;c()};l.prototype.cleanup=function(){var a=d(this.element).children(".working");
d(".sliding").replaceWith("");d(".slidingBg").replaceWith("");d(".slideShadow").replaceWith("");var b=this.slideSide,c=a;"ltor"===this.options.forwardDir&&1===b||"rtol"===this.options.forwardDir&&-1===b||"ttob"===this.options.forwardDir&&1===b||"btot"===this.options.forwardDir&&-1===b?1===Math.abs(this.currentRatio)&&(c=this.getNextContent(a)):1===Math.abs(this.currentRatio)&&(c=this.getPrevContent(a));c.addClass("flipCurrent");a.removeClass("working");"function"===typeof this.options.didEndFlip&&
this.options.didEndFlip();this.slideSide=this.currentRatio=null;this.isInAnimation=!1};l.prototype.getNextContent=function(a){a=a.next(".flipContent");0===a.length&&this.options.loop&&(a=d(this.element).children(".flipContent").first());return 0===a.length?d():a};l.prototype.getPrevContent=function(a){a=a.prev(".flipContent");0===a.length&&this.options.loop&&(a=d(this.element).children(".flipContent").last());return 0===a.length?d():a};l.prototype.shouldTransitionContinue=function(a){return Math.abs(a)>
this.THREASHOLD_RATIO};h.prototype.jqmInit=function(){if(null!==d.mobile){var a=d(this.element);d.mobile.ns&&(s=d.mobile.ns);for(var b=0,c=t.length;b<c;b++){var g=t[b],e=a.attr("data-"+s+g.attr);e&&(this.options[g.key]=1===g.type?"true"===e.toLowerCase()?!0:!1:e)}}};h.prototype.isFlipSupported=function(){var a=d.browser;return a.webkit||a.mozilla&&10<parseInt(a.version.slice(0,2),10)?!0:!1};h.prototype._getMouseMovement=function(a,b){if(null===this._clickContext.downPt)return null;var c=a-this._clickContext.downPt.x,
d=b-this._clickContext.downPt.y,c="rtol"===this.options.forwardDir||"ltor"===this.options.forwardDir?c:d;if(null===this._clickContext.flipside)if(Math.abs(c)>this.effect.START_OFFSET)this._clickContext.flipside=0>c?-1:1,this.effect.init(this._clickContext.flipside);else return null;return c-=this.effect.START_OFFSET*(-1===this._clickContext.flipside?-1:1)};h.prototype._getClientMousePos=function(a){return null===a.clientX&&a.originalEvent?{x:a.originalEvent.clientX,y:a.originalEvent.clientY}:{x:a.clientX,
y:a.clientY}};h.prototype.vmousedown=function(a){if(this._clickContext.downPt||this.effect.isInAnimation)return!1;var a=this._getClientMousePos(a),b=(new Date).getTime();this._clickContext.downPt=a;this._clickContext.downTime=b;this._clickContext.lastInfo={x:a.x,y:a.y,time:b};this._clickContext.dList=[];this._clickContext.tList=[];return!0};h.prototype._getRatio=function(a){a/=this.effect.MAX_DISTANCE;return a=1===this._clickContext.flipside?Math.min(Math.max(0,a),1):Math.min(Math.max(-1,a),0)};h.prototype._pushMouseInfo=
function(a){var b=(new Date).getTime(),c=0,c="ltor"===this.options.forwardDir||"rtol"===this.options.forwardDir?a.x-this._clickContext.lastInfo.x:a.y-this._clickContext.lastInfo.y;if(0===c)return!1;var d=b-this._clickContext.lastInfo.time;20<this._clickContext.dList.length&&(this._clickContext.dList.shift(),this._clickContext.tList.shift());this._clickContext.dList.push(c);this._clickContext.tList.push(d);this._clickContext.lastInfo={x:a.x,y:a.y,time:b};return!0};h.prototype.vmousemove=function(a){if(null===
this._clickContext.downPt||this.effect.isInAnimation)return!1;var b=this._getClientMousePos(a),c=this._getMouseMovement(b.x,b.y);if(null===c||!this._pushMouseInfo(b))return!1;b=this._getRatio(c);this.effect.step(b);a.preventDefault();return!1};h.prototype.flipPrev=function(){if(null===this._clickContext.flipside){var a=d(this.element).children(".flipCurrent"),a=this.effect.getPrevContent(a),b=this.options.forwardDir;0<a.length&&("rtol"===b||"btot"===b?(this._clickContext.flipside=1,this.effect.init(this._clickContext.flipside),
this.effect.action(1)):(this._clickContext.flipside=-1,this.effect.init(this._clickContext.flipside),this.effect.action(-1)))}};h.prototype.flipNext=function(){if(null===this._clickContext.flipside){var a=d(this.element).children(".flipCurrent"),a=this.effect.getNextContent(a),b=this.options.forwardDir;0<a.length&&("rtol"===b||"btot"===b?(this._clickContext.flipside=-1,this.effect.init(this._clickContext.flipside),this.effect.action(-1)):(this._clickContext.flipside=1,this.effect.init(this._clickContext.flipside),
this.effect.action(1)))}};h.prototype._getCleanupFunc=function(){var a=this,b=this.options.didEndFlip;return function(){var c=d(a.element).children(".flipCurrent").index();a.options.showPager&&a.setPagerPos(c);a._clickContext.downPt=null;a._clickContext.downTime=null;a._clickContext.flipside=null;a._clickContext.lastInfo=null;a._clickContext.dList=[];a._clickContext.aList=[];"function"===typeof b&&b(c)}};h.prototype.vmouseup=function(a){if(null===this._clickContext.downPt||this.effect.isInAnimation)return!0;
var b=this._getClientMousePos(a),c=d(this.element),b=this._getMouseMovement(b.x,b.y);if(null===b)return this._clickContext.downPt=null,this._clickContext.flipside=null,this._clickContext.downTime=null,this._clickContext.lastInfo=null,this._clickContext.dList=[],this._clickContext.aList=[],!0;var b=this._getRatio(b),g=-1===this._clickContext.flipside?-1:1,c=c.children(".working"),e=null,e=0,e=this.options.forwardDir,f=this._clickContext.flipside,e="ltor"===e&&1===f||"rtol"===e&&-1===f||"ttob"===e&&
1===f||"btot"===e&&-1===f?this.effect.getNextContent(c):this.effect.getPrevContent(c),e=this.effect.shouldTransitionContinue(b,this._clickContext)&&0<e.length?g:0;this.effect.action(e);a.preventDefault();return!0};h.prototype.initPager=function(){var a=d(this.element),b=a.height()-24+"px";a.children("div,p,section,article").each(function(a,c){d(c).css("height",b)});var c=a.children(".flipContent").length;a.append(d('<div class="pager"></div>'));for(var g=a.children(".pager"),e=0;e<c;e++)g.append(d('<span class="dot">&nbsp;</span>'));
a=a.children(".flipCurrent").index();g.children(".dot").eq(a).addClass("current")};h.prototype.setPagerPos=function(a){var b=d(this.element);b.find(".pager span.dot.current").removeClass("current");b.find(".pager span.dot").eq(a).addClass("current")};h.prototype.pagerTap=function(a){var b=d(this.element).children(".pager").width();this._getClientMousePos(a).x<b/2?this.flipPrev():this.flipNext()};h.prototype._isAccessFromMobileBrowser=function(){return navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||
navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/)?!0:!1};h.prototype.init=function(){var a=d.browser;a.webkit?q="webkit":a.mozilla&&10<parseInt(a.version.slice(0,2),10)&&(q="Moz");var a=d(this.element),b=this.options.height;if(""===b){var c=a.parent().height();0===c&&(c=d(p.body).height());b=c-a.offset().top+"px"}a.addClass("flipContainer").css("height",b);a.children("div,p,section").each(function(a,c){d(c).addClass("flipContent").css("height",
b)});0===a.children(".flipCurrent").length&&a.children().eq(0).addClass("flipCurrent");var g="mousedown",c="mousemove",e="mouseup";d.mobile&&(g="vmousedown",c="vmousemove",e="vmouseup");var f=this;this._isAccessFromMobileBrowser()||a.find("img").each(function(a,b){d(b).bind(g,function(a){a.preventDefault()})});this.options.showPager&&(this.initPager(),a=a.children(".pager"),a.bind(g,function(a){a.preventDefault();return!1}),a.bind(e,function(a){f.pagerTap(a);a.preventDefault();return!1}));d(this.element).bind(g,
function(a){return f.vmousedown(a)});d(this.element).bind(c,function(a){return f.vmousemove(a)});d(this.element).bind(e,function(a){return f.vmouseup(a)});this.options.keyboardNav&&d(p).unbind("keydown.flip").bind("keydown.flip",function(a){if(!d(a.target).is("input, textarea, select, button")){var b=f.options.forwardDir;37===a.keyCode?"rtol"===b?f.flipNext():f.flipPrev():39===a.keyCode&&("rtol"===b?f.flipPrev():f.flipNext())}})};d.fn[n]=function(a){1<this.length&&(a.keyboardNav=!1);return this.each(function(){if(!d.data(this,
"plugin_"+n)){var b=new h(this,a);d.data(this,"plugin_"+n,b)}})};d(p).bind("pageinit create",function(a){d(':jqmData(role="flip")',a.target).flip()})})(jQuery,window,document);
